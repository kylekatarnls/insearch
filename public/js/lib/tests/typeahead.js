// Generated by CoffeeScript PHP 1.3.1

describe("Plug-in typeahead", function() {
  describe("La méthode exists", function() {
    it("Devrait être définie", function() {
      return expect($('body').exists).toBeDefined();
    });
    it("Devrait permettre de savoir si une collection jQuery contient au moins 1 élément", function() {
      return expect($('body').exists()).toBe(true);
    });
    return it("Devrait permettre de savoir si une collection jQuery ne contient aucun élément", function() {
      return expect($('#id-qui-nexiste-pas').exists()).toBe(false);
    });
  });
  return describe("La méthode autocomplete", function() {
    it("Devrait être définie", function() {
      return expect($('input').autocomplete).toBeDefined();
    });
    it("Devrait permettre l'autocompletion d'un champ", function() {
      return inTextInput(function() {
        var catchCallback, catchValue;
        catchValue = void 0;
        catchCallback = void 0;
        this.autocomplete(function(value, callback) {
          catchValue = value;
          return catchCallback = callback;
        });
        this.val('test').trigger('change');
        expect(catchValue).toBe('test');
        expect(typeof catchCallback).toBe('function');
        return this.val('').trigger('change');
      });
    });
    it("Devrait annuler la propagation des événements lors de l'appui sur Haut et Bas dans un champ", function() {
      return inTextInput(function() {
        var event;
        this.autocomplete(function() {});
        event = jQuery.Event('keydown');
        event.keyCode = 38;
        this.val('test').trigger(event);
        expect(event.isPropagationStopped()).toBe(true);
        event = jQuery.Event('keydown');
        event.keyCode = 40;
        this.val('').trigger(event);
        return expect(event.isPropagationStopped()).toBe(true);
      });
    });
    it("Ne devrait pas empêcher d'écrire dans le champ", function() {
      return inTextInput(function() {
        var event;
        this.autocomplete(function() {});
        event = jQuery.Event('keydown');
        event.keyCode = 65;
        this.val('test').trigger(event);
        return expect(event.isPropagationStopped()).toBe(false);
      });
    });
    return it("Devrait créer une balise de classe 'autocomplete'", function() {
      return inTextInput(function() {
        this.autocomplete(function() {});
        return expect($('.autocomplete').exists()).toBe(true);
      });
    });
  });
});
